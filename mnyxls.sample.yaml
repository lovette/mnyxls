######################################################################
# User configuration file for mnyxls.

# List of reports.
# Not used if REPORT is given as command line arguments.
# Paths are relative to the `data_dir` directory.
# File names may include glob patterns.
reports:
  - "Account balances with details.csv"
  - "Account balances.csv"
  - "Account transactions.csv"
  - "Income and Spending.csv"
  - "Investment account transactions.csv"
  - "Loan terms.csv"
  - "Monthly income and expenses.csv"

# Set to directory path.
# Use ".". to reference working directory.
# Defaults to configuration file directory, if set, otherwise report directory.
# data_dir: ""

# Set to file or directory name or path.
# Use ".". to reference working directory.
# Defaults to "Account transactions {min_date} to {max_date}.xlsx".
# xls_file: ""

# Set to file or directory name or path.
# Use ".". to reference working directory.
# Defaults to "mnyxls_template.xlsx".
# xls_template: "mnyxls_template.xlsx"

# Set to file or directory name or path.
# Use ".". to reference working directory.
# Defaults to report name with `.sqlite3` extension.
# db_file: ""

# Save interim reports for review.
# save_interim_reports: True

# Filter report dates imported.
# Formatted as YYYY-MM-DD.
# import_date_from: "2000-01-01"
# import_date_to: "2024-12-31"

# Enable to include SQL statements in debug output.
# debug_sql: True

######################################################################
# Accounts

# Account categories and classifications
# These take precedence over classifications types defined in any reports.
account_categories:
  "Assets":
    - "Bank and Cash Accounts"
    - "Investment"
    - "Other"

  "Liabilities":
    - "Credit Cards"
    - "Loan"
    - "Mortgage"
    - "Other"

# Account details
# These take precedence over categories types defined in any reports.
accounts:
  "My Investment Account":
    "opened_date": "2004-07-01"
  "My Checking Account":
    "category": "Bank and Cash Accounts"

######################################################################
# Categories

# Default category type.
# Default is "Expense".
# category_type_default: "Expense"

# Default category class.
# Default is "Discretionary".
# category_class_default: "Discretionary"

# Category types and associated categories and/or subcategories.
# Applies to all subcategories if a subcategory is not given.
# These take precedence over category types defined in any reports.
category_types:
  "Income":
    - "Interest Income"
    - "Investment Income"
    - "Other Income"
    - "Wages & Salary"

# Category classes and associated categories and/or subcategories.
# Applies to all subcategories if a subcategory is not given.
category_classes:
  "Essential":
    - "Education"
    - "Groceries"
    - "Healthcare"
    - "Insurance"
    - "Taxes"
    - "Telephone"
    - "Utilities"

######################################################################
# Eras
#
# Each era is a defined date range that can be used as `select` and `foreach` criteria.
# Each era must have a `date_from` or `date_to` or both.
# The first era must specify `date_to`.
# If `date_from` is not specified, it is set to the day after the `date_to` of the previous era.
# The last era can specify a `date_to` of "..." (i.e., an open-ended era) to include all future dates.
# A warning will be issued if there are overlapping eras or gaps in the date ranges.

eras:
  "Era A":
    "date_to": "2019"
  "Era B":
    "date_to": "2020"
  "Era C":
    "date_to": "..."

######################################################################
# Rewrite rules
#
# This list of rules is applied to the report data to modify transaction details.
# Each rule defines fields to modify and the transactions changes are applied to.
# The rules are applied in the order they are defined.
# At least one modify value field must be specified.
# Changes are applied to transactions that match the `select` criteria.
# All select fields must match the transaction to be modified.
# New payees and categories can be specified.

# rewrites:
#     - txndate: "New date" # YYYY-MM-DD
#       payee: "New payee"
#       category: "New category : New subcategory"
#       memo: "New memo"
#       select:
#         account: ...
#         category: ...
#         payee: ...
#         date_from: ...
#         date_to: ...
#         yyyy: ...
#     - txndate: "New date"
#       ...

######################################################################
# Excel Workbook
#
# The workbook can be defined in the main configuration file or a separate configuration file.
# The workbook configuration file `mnyxls_workbook.yaml` is used if it exists in the data directory
# or the path can be set with the `--xls-config` command line option.

workbook:
  autofit: True

  worksheets:
    "Txn Types":
      sheet_type: "txns"
      foreach: "txntype"
      skipempty: False
      consolidate: "yyyymm"

    "Category by year":
      sheet_type: "txns:pivot"
      options:
        rows: "category"
        columns: "yyyy"

    "Annual expense transactions":
      sheet_type: "txns"
      foreach: "yyyy"
      select:
        txntype: "Expense"
